<container>
	<!-- request-params="requestParams"
		grid-options="gridOptions" -->
	<div ng-controller="taskTypeCtrl" filtered-list="{method: 'tasks/dictionary/getTaskTypes'}">
		<twocolumn-side>
			<button type="button" class="btn btn-success" ng-click="refreshList()"
			        ng-disabled="!applyEnabled" style="float:right;">Apply</button>

			<tabset>
				<tab heading="Simple">
					<form>
						<fieldset>
							<label>Наименование</label>
							<input filter-input="{path: 'Name', op:'like'}" filter-ng-model="filter.simple.Name" />
						</fieldset>
					</form>
				</tab>

				<tab heading="Complex">
					<div structured-filter filter-ng-model="filter.complex" meta="'tasks/dictionary/taskTypeMetadata'">
					</div>
				</tab>

				<tab heading="Favorites">
					<div filter-persister group="'Tasks'" filter="filter"></div>
				</tab>
			</tabset>
		</twocolumn-side>

		<twocolumn-content>
			<div ng-show="loading.active()" us-spinner="{top:100}"></div>

			<div class="alert alert-error span12" ng-show="validation.generalError">
				{{ validation.generalError }}
			</div>
			<form name="createTaskTypeForm" novalidate>
				<fieldset>
					<div class="input-append">
						<input type="text" ng-model="editModel.name" placeholder="Наименование типа задачи" required />
						<button type="button" class="btn" ng-click="createTaskType()" ng-disabled="createTaskTypeForm.$invalid">Добавить</button>
					</div>
					<span ng-show="validation.fieldErrors['Name']" class="help-inline alert-error">
						{{ validation.fieldErrors['Name'] }}
					</span>
					<button type="button" class="btn pull-right" ng-click="deleteSelected()" ng-disabled="!hasSelected()">Удалить</button>
				</fieldset>
			</form>

<button type="button" class="btn" ng-click="test()">Test</button>

			<table class="table table-bordered sortable">
				<thead>
					<tr>
						<th style="width: 1%">
							<input type="checkbox" checker="items: 'models'">
						</th>
						<th data-sortproperty="Name" data-defaultsort="asc">Наименование</th>
						<th data-sortproperty="Creator.FIO" style="width: 15%">Автор</th>
						<th data-sortproperty="CreationTime" style="width: 17%">Дата создания</th>
						<th style="width: 1%">&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="model in models">
						<td>
							<input type="checkbox" ng-model="model.selected" data-itemid="{{ model.Id }}">
						</td>
						<td>{{ model.Name }}</td>
						<td>{{ model.Author }}</td>
						<td>{{ model.CreationTime | date:'dd.MM.yyyy hh:mm:ss' }}</td>
						<td>
							<button type="button" class="close" title="Удалить тип задачи" ng-click="delete(model.Id)">&times;</button>
						</td>
					</tr>
				</tbody>
			</table>
			<pagination
					num-pages="gridOptions.numPages"
					current-page="gridOptions.page">
			</pagination>
		</twocolumn-content>
	</div>
	
</container>